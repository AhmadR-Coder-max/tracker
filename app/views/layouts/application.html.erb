<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tracker</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <%= render 'layouts/navbar' %>
    <%= render 'layouts/notifications' %>

    <div class="mt-7">
      <%= yield %>
    </div>

    <script>
        const body = document.querySelector('body');
        const button = document.querySelector('#modeToggler');

        document.addEventListener('DOMContentLoaded', () => {
            if (sessionStorage.getItem("mode") == "light") {
                body.classList.remove('dark-mode');
                button.innerHTML = "ðŸŒ‘";
            } else {
                body.classList.add('dark-mode');
                button.innerHTML = "âš¡";
            }
        })

        function toggleDarkMode() {
            if (sessionStorage.getItem("mode") == "dark") {
                sessionStorage.setItem("mode", "light");
                button.innerHTML = "ðŸŒ‘";
            } else {
                sessionStorage.setItem("mode", "dark");
                button.innerHTML = "âš¡";
            }

            body.classList.toggle('dark-mode');
        }
    </script>
  </body>
</html>
